(function(h,g){h.URL=h.URL||h.webkitURL;h.w=function(r){function t(a){if(!(0<a.b.readyState)){var f=g.createElement("canvas"),c=f.getContext("2d"),d=a.f.width,e=a.f.height;d>e?d>b.a.h&&(e*=b.a.h/d,d=b.a.h):e>b.a.i&&(d*=b.a.i/e,e=b.a.i);f.width=d;f.height=e;c.drawImage(a.f,0,0,d,e);f=f.toDataURL(a.file.type);b.a.formData.append(b.a.v,f);a.b.open("POST",b.a.target,!0);a.b.onload=function(){4==a.b.readyState&&200<=a.b.status&&300>=a.b.status?(a.status="sucess",a.g.classList.add("uploadSucess")):(a.status=
"error",a.g.classList.add("uploadError"));b.done.push(a);b.c.splice(b.c.indexOf(a),1);m()};a.b.upload.addEventListener("progress",function(b){b.lengthComputable&&(a.j.value=Math.round(b.loaded/b.total*100))},!1);a.b.send(b.a.formData)}}function u(a){var f={},c=g.createElement("div"),d=g.createElement("div"),e=g.createElement("div"),n=g.createElement("progress"),p=g.createElement("div"),k=g.createElement("button");c.classList.add("queueItem");d.classList.add("thumb");e.classList.add("progress");n.max=
100;p.classList.add("menu");k.innerText=b.a.l;k.classList.add("btnCancel");k.addEventListener("click",function(){var a=f;4!=a.b.readyState&&"canceled"!=a.status&&(a.status="canceled",a.g.classList.add("uploadCanceled"),a.b.abort(),a.j.value=0,b.done.push(a),b.c.splice(b.c.indexOf(a),1),m())});e.appendChild(n);p.appendChild(k);c.appendChild(d);c.appendChild(e);c.appendChild(p);var l=new Image;l.src=h.URL.createObjectURL(a);l.onload=function(){d.style="background-image: url('"+l.src+"');";m()};f={status:"queue",
file:a,f:l,b:new XMLHttpRequest,g:c,j:n};g.getElementById(b.a.m).appendChild(c);b.c.push(f)}function m(){0<b.c.length?b.c[0].f.complete&&t(b.c[0]):b.done=[]}function q(a,b){if(a){var c;if("undefined"!==typeof a.length)for(c=0;c<a.length&&!1!==b.call(void 0,a[c],c);c++);else for(c in a)if(a.hasOwnProperty(c)&&!1===b.call(void 0,a[c],c))break}}var b=this;this.o={target:"/",formData:new FormData,v:"image",u:"image",h:1E3,i:1E3,m:"uploads",l:"CANCEL",B:function(){},A:function(){}};this.a={};this.a=function(a,
b){q(arguments,function(b){b!==a&&q(b,function(b,c){a[c]=b})});return a}({},this.o,r||{});this.s=g.getElementById(this.a.u);this.c=[];this.done=[];this.s.addEventListener("change",function(){for(var a=this.files.length,b=0;b<a;b++)u(this.files[b])})}})(window,document);